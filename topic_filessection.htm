<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<title>Секция [Files]</title>
<!--[if IE 6]><style type="text/css">html{overflow-y:scroll}</style><![endif]-->
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" src="topic.js"></script>
</head>
<body>
<h1 class="topicheading">Секция [Files]</h1>
<div class="topicbody">
  <p>Это не обязательная секция, но в большинстве случаев необходима. Она определяет файлы, которые инсталлятор установит в системе пользователя.</p>
  <p>Пример секции <tt>[Files]</tt>:</p>
  <pre class="indent examplebox">
[Files]<br />Source: &quot;CTL3DV2.DLL&quot;; DestDir: &quot;{sys}&quot;; Flags: onlyifdoesntexist uninsneveruninstall<br />Source: &quot;MYPROG.EXE&quot;; DestDir: &quot;{app}&quot;<br />Source: &quot;MYPROG.CHM&quot;; DestDir: &quot;{app}&quot;<br />Source: &quot;README.TXT&quot;; DestDir: &quot;{app}&quot;; Flags: isreadme</pre>
  <p>В конце этой страницы находятся <i>замечания</i>, которые следует прочитать.</p>
  <p>Список поддерживаемых <a href="topic_params.htm">параметров</a>:</p>
  <dl>
    <dt class="paramlist"><b><a name="Source" id="Source">Source</a></b>&#160;<i>(Обязательно)</i></dt>
    <dd class="paramlist">
      <p>Имя <i>исходного файла</i>. Компилятор сам допишет путь к <a href="topic_sourcedirectorynotes.htm">папке с устанавливаемым файлом</a>, если вы не зададите полный путь к нему.</p>
      <p>Группу файлов можно задавать одним параметром (маской). В этом случае все файлы будут иметь одинаковые опции.</p>
      <p>Если указан флаг <tt>external</tt>, к устанавливаемому файлу (или маске) должен быть прописан полный путь, иначе инсталлятор будет искать его в своей папке (например, &quot;{src}\license.ini&quot;).</p>
      <p>Может содержать константы только при установленном флаге <tt>external</tt>, потому что компилятор сам по себе не понимает констант.</p>
      <div class="examplebox">
        <div class="exampleheader">Примеры:</div>
        <pre class="nomargin">
Source: &quot;MYPROG.EXE&quot;<br />Source: &quot;Files\*&quot;</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="DestDir" id="DestDir">DestDir</a></b>&#160;<i>(Обязательно)</i></dt>
    <dd class="paramlist">
      <p>Папка в системе пользователя в которую будут установлены файлы. Почти всегда начинается константой. Если указанный путь не существует в системе пользователя, он будет создан автоматически и автоматически удален при деинсталляции, если окажется пустым.</p>
      <div class="examplebox">
        <div class="exampleheader">Примеры:</div>
        <pre class="nomargin">
DestDir: &quot;{app}&quot;<br />DestDir: &quot;{app}\subdir&quot;</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="DestName" id="DestName">DestName</a></b></dt>
    <dd class="paramlist">
      <p>Определяет новое имя, которое присвоится файлу после установки на компьютер пользователя. По умолчанию инсталлятор использует имя, указанное в параметре <tt>Source</tt>, так что в большинстве случаев этот параметр можно не указывать.</p>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">
DestName: &quot;MYPROG2.EXE&quot;
</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="Excludes" id="Excludes">Excludes</a></b></dt>
    <dd class="paramlist">
      <p>Указывает список образцов для исключения, разделенных запятыми. Этот параметр не комбинируется с флагом <tt>external</tt>.</p>
      <p>Образцы могут включать маски (&quot;*&quot; и &quot;?&quot;). Note that unlike the <tt>Source</tt> parameter, a simple Unix-style pattern matching routine is used for <tt>Excludes</tt>. Точки в образце являются всегда существенными, таким образом &quot;*.*&quot; не будет исключать файл без расширения (вместо этого, используйте только &quot;*&quot;). Кроме того, вопросительные знаки всегда соответствуют точно один символ, таким образом&quot;?????&quot; не будет исключать файлы с именами меньше чем пять символов.</p>
      <p>Если образец начинается с обратного слеша (&quot;\&quot;), он добавляется к полному пути впереди, иначе присоединяется к пути сзади. Так, &quot;\foo&quot; исключит только файлы с именем &quot;foo&quot; в корневой папке, а &quot;foo&quot; исключит все файлы с именем &quot;foo&quot;, где бы они ни находились.</p>
      <p>Образцы могут содержать бэкслеши. Так, &quot;foo\bar&quot; исключит &quot;foo\bar&quot; и &quot;subdir\foo\bar&quot;, а &quot;\foo\bar&quot; - только &quot;foo\bar&quot;.</p>
      <div class="examplebox">
        <div class="exampleheader">Примеры:</div>
        <pre class="nomargin">
Source: &quot;*&quot;; Excludes: &quot;*.~*&quot;<br />Source: &quot;*&quot;; Excludes: &quot;*.~*,\Temp\*&quot;; Flags: recursesubdirs</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="ExternalSize" id="ExternalSize">ExternalSize</a></b></dt>
    <dd class="paramlist">
      <p>Определяет размер внешнего файла в байтах. Этот параметр должен быть комбинирован с флагом <tt>external</tt>. Если параметр не определен, инсталлятор получает размер файла при запуске. Прежде всего, это полезно для файлов, которые не доступны при запуске, например файлы, расположенные на втором диске, когда используется <a href="topic_setup_diskspanning.htm">разбивка на диски</a>.</p>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">
ExternalSize: 1048576; Flags: external</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="CopyMode" id="CopyMode">CopyMode</a></b></dt>
    <dd class="paramlist">
      <p>В новых скриптах не следует использовать этот параметр. Этот параметр перекрывается и вытесняется флагами Inno Setup 3.0.5:</p>
      <p><tt>CopyMode: normal -&gt; Flags: promptifolder</tt><br />
        <tt>CopyMode: alwaysskipifsameorolder -&gt;</tt> no flags<br />
        <tt>CopyMode: onlyifdoesntexist -&gt; Flags: onlyifdoesntexist</tt><br />
        <tt>CopyMode: alwaysoverwrite -&gt; Flags: ignoreversion</tt><br />
        <tt>CopyMode: dontcopy -&gt; Flags: dontcopy</tt></p>
      <p>CopyMode представлял собой: <tt>alwaysskipifsameorolder</tt> теперь принимается по умолчанию. (Раньше по умолчанию принималось <tt>CopyMode: normal</tt>.)</p>
    </dd>
    <dt class="paramlist"><b><a name="Attribs" id="Attribs">Attribs</a></b></dt>
    <dd class="paramlist">
      <p>Задает дополнительные атрибуты для папки: один или более из <tt>readonly</tt>, <tt>hidden</tt>, <tt>system</tt>, <tt>notcontentindexed</tt>. Если этот параметр не указан, инсталлятор не назначит ни одного специального параметра для папки.</p>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">
Attribs: hidden system
</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="Permissions" id="Permissions">Permissions</a></b></dt>
    <dd class="paramlist">
      <p>Задает дополнительные разрешения в ACL (access control list - список доступа) папки. Не рекомендуется использовать этот параметр, если вы не хорошо разбираетесь в ACL или в том, для чего следует его менять, потому что неправильное изменение может негативно сказаться на безопасности системы.</p>
      <p>Для эффективной работы параметра папка должна быть расположена в файловой системе, поддерживающей ACL (например NTFS), и пользователь должен иметь права на изменение разрешений папки. В случае если эти правила не соблюдены, сообщений об ошибке выдаваться не будут, и разрешения не вступят в силу.</p>
      <p>Этот параметр должен быть использован только для файлов приложения. Никогда не меняйте ACL для общих системных файлов, иначе можно повредить систему безопасности.</p>
      <p>Указанные разрешения устанавливаются не зависимо от того, существовал ли файл до инсталляции.</p>
      <p>Параметр может включать одно или более значений, разделенных пробелами:</p>
      <div class="indent">
        <p><tt><a href="topic_usergroupids.htm">&lt;идентификатор пользователя или группы&gt;</a>-&lt;тип доступа&gt;</tt></p>
      </div>
      <p>В секции [Files] поддерживаются следующие типы доступа:</p>
      <dl>
        <dt class="flaglist"><a name="full" id="full">full</a></dt>
        <dd>
          <p>Разрешение &quot;полного доступа&quot;, похожее на modify (см. ниже), но кроме того позволяет указанному пользователю/группе пользователей присвоить файл и менять для него разрешения. Используйте как можно реже; как правило, <tt>modify</tt> будет достаточно.</p>
        </dd>
        <dt class="flaglist"><a name="modify" id="modify">modify</a></dt>
        <dd>
          <p>Разрешение &quot;на модификацию&quot;, которое позволяет указанному пользователю/группе пользователей чтение, выполнение, создание, модификацию и удаление файла.</p>
        </dd>
        <dt class="flaglist"><a name="readexec" id="readexec">readexec</a></dt>
        <dd>
          <p>Разрешение &quot;на чтение и выполнение&quot;, которое позволяет указанному пользователю/группе пользователей чтение и выполнение файла.</p>
        </dd>
      </dl>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">
Permissions: users-modify
</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="FontInstall" id="FontInstall">FontInstall</a></b></dt>
    <dd class="paramlist">
      <p>Указывает инсталлятору, что устанавливаемый файл является файлом шрифтов. Значение этого параметра - имя шрифта, заданного в реестре или WIN.INI. Имя должно быть в точности такое же, какое отображается при открытии его в Проводнике. Обратите внимание, что инсталлятор автоматически допишет в конец имени шрифта &quot; (TrueType)&quot;.</p>
      <p>Если файл не является файлом шрифта TrueType, нужно указать флаг <tt>fontisnttruetype</tt> в параметре Flags.</p>
      <p>Рекомендуется использовать флаги <tt>onlyifdoesntexist</tt> и <tt>uninsneveruninstall</tt> при установке шрифта в папку {fonts}.</p>
      <p>Для успешной установки шрифта, пользователь должен входить в группы привилегированные пользователи или администраторы.</p>
      <p>Для совместимости с 64-разрядным Windows шрифты не должны быть установлены в каталог <tt>{sys}</tt>. Используйте константу <tt>{fonts}</tt> как конечную папку.</p>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">
Source: &quot;OZHANDIN.TTF&quot;; DestDir: &quot;{fonts}&quot;; FontInstall: &quot;Oz Handicraft BT&quot;; Flags: onlyifdoesntexist uninsneveruninstall
</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="StrongAssemblyName" id="StrongAssemblyName">StrongAssemblyName</a></b></dt>
    <dd class="paramlist">
      <p>Определяет имя сборки файла. Используется только деинсталлятором.</p>
      <p>Параметр игнорируется, если флаг <tt>gacinstall</tt> не определен.</p>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">
StrongAssemblyName: &quot;MyAssemblyName, Version=1.0.0.0, Culture=neutral, PublicKeyToken=abcdef123456, ProcessorArchitecture=MSIL&quot;
</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="Flags" id="Flags">Flags</a></b></dt>
    <dd class="paramlist">
      <p>Параметры для установки дополнительных опций. Разделяются пробелами. Поддерживаемые значения:</p>
      <dl>
        <dt class="flaglist"><a name="32bit" id="32bit">32bit</a></dt>
        <dd>
          <p>Заставляет константу <tt>{sys}</tt> принять значение 32-разрядной папки System, при использовании в параметрах <tt>Source</tt>, <tt>DestDir</tt>, флагами <tt>regserver</tt> и <tt>regtypelib</tt>, чтобы обработать файл как 32-разрядный, и флагом <tt>sharedfile</tt>, чтобы обновить 32-разрядный регистрационный ключ SharedDLLs. Это - поведение по умолчанию в <a href="topic_32vs64bitinstalls.htm">32-разрядном режиме</a> установки.</p>
        </dd>
        <dt class="flaglist"><a name="64bit" id="64bit">64bit</a></dt>
        <dd>
          <p>Заставляет константу <tt>{sys}</tt> принять значение 64-разрядного каталога System, при использовании в параметрах <tt>Source</tt>, <tt>DestDir</tt>, флагами <tt>regserver</tt> и <tt>regtypelib</tt>, чтобы обработать файл как 64-разрядный, и флагом <tt>sharedfile</tt>, чтобы обновить 64-разрядный регистрационный ключ SharedDLLs. Это - поведение по умолчанию в <a href="topic_32vs64bitinstalls.htm">64-разрядном режиме</a> установки.</p>
        </dd>
        <dt class="flaglist"><a name="allowunsafefiles" id="allowunsafefiles">allowunsafefiles</a></dt>
        <dd>
          <p>Отменяет автоматическую проверку компилятором <a href="topic_unsafefiles.htm">ненадежных файлов</a>. Строго рекомендуется НЕ ИСПОЛЬЗОВАТЬ этот флаг, если вы не очень понимаете, зачем это нужно.</p>
        </dd>
        <dt class="flaglist"><a name="comparetimestamp" id="comparetimestamp">comparetimestamp</a></dt>
        <dd>
          <p><i>(Не рекомендуется использовать; см. ниже),</i><br />
            Указывается инсталлятору продолжать сравнивать временные отметки, если файл был уже установлен в системе пользователя, и по крайней мере одно из следующих условий выполняется:</p>
          <ul>
            <li>1. Ни один из файлов, также как и установленный файл не имеет информации о версии.</li>
            <li>2. При этом в параметре используется флаг <tt>ignoreversion</tt>.</li>
            <li>3. Флаг <tt>replacesameversion</tt> не используется, и существующие и устанавливаемые файлы имеют одинаковые номера версий (указанные как информация о версии файла).</li>
          </ul>
          <p>Если существующий файл имеет более раннюю временную отметку, чем устанавливаемый файл, существующий файл будет заменен. Иначе замена не будет выполнена.</p>
          <p>Использовать этот флаг рекомендуется только в <i>крайнем случае</i>, потому что возможны негативные последствия: система NTFS использует временные отметки UTC (в отличие от FAT), вследствие чего локальные временные отметки, с которыми по умолчанию работает Inno Setup, меняются всякий раз, когда пользователь меняет часовой пояс или когда время отображается неправильно. Это может привести к ситуации, что файлы переместятся туда, где пользователь не ожидает их увидеть, или не переместятся.</p>
        </dd>
        <dt class="flaglist"><a name="confirmoverwrite" id="confirmoverwrite">confirmoverwrite</a></dt>
        <dd>
          <p>Всегда спрашивает у пользователя подтверждения перед заменой существующего файла.</p>
        </dd>
        <dt class="flaglist"><a name="createallsubdirs" id="createallsubdirs">createallsubdirs</a></dt>
        <dd>
          <p>По умолчанию компилятор пропускает пустые папки, когда он рекурсивно вызывает подкаталоги в папке <tt>Source</tt>. Этот флаг заставляет создать эти папки во время установки (точно так же, как если Вы создали их с помощью [Dir]).</p>
          <p>Должен комбинироваться с <tt>recursesubdirs</tt>.</p>
        </dd>
        <dt class="flaglist"><a name="deleteafterinstall" id="deleteafterinstall">deleteafterinstall</a></dt>
        <dd>
          <p>Указывает инсталлятору установить файл как обычно, но удалить его после завершения (или прерывания) установки. Это может быть полезно, когда извлекаемые временные файлы нужны программе для выполнения скрипта в секции [Run].</p>
          <p>Этот флаг не удалит файл, существующий до начала установки, после этой установки</p>
          <p>Этот флаг не комбинируется с флагами <tt>isreadme</tt>, <tt>regserver</tt>, <tt>regtypelib</tt>, <tt>restartreplace</tt>, <tt>sharedfile</tt>, или <tt>uninsneveruninstall</tt>.</p>
        </dd>
        <dt class="flaglist"><a name="dontcopy" id="dontcopy">dontcopy</a></dt>
        <dd>
          <p>Не копировать файл на компьютер пользователя. Этот флаг полезен, если файл используется в секции [Code] и извлекается процедурой <a href="isxfunc/topic_isxfunc_extracttemporaryfile.htm">ExtractTemporaryFile</a>.</p>
        </dd>
        <dt class="flaglist"><a name="dontverifychecksum" id="dontverifychecksum">dontverifychecksum</a></dt>
        <dd>
          <p>Не дает инсталлятору проверять контрольную сумму после извлечения файлов. Используйте этот флаг для файлов, которые вы хотите изменить после компиляции инсталлятора.</p>
          <p>Должен комбинироваться с флагом <tt>nocompression</tt>.</p>
        </dd>
        <dt class="flaglist"><a name="external" id="external">external</a></dt>
        <dd>
          <p>Этот флаг указывает инсталлятору не компилировать файл, заданный в параметре <tt>Source</tt>, а скопировать из носителя информации или из системы пользователя. См. описание параметра <tt>Source</tt> для получения дополнительной информации.</p>
        </dd>
        <dt class="flaglist"><a name="fontisnttruetype" id="fontisnttruetype">fontisnttruetype</a></dt>
        <dd>
          <p>Задайте этот флаг в параметре <tt>FontInstall</tt>, если устанавливаете файл шрифта, который <i>не является TrueType</i>.</p>
        </dd>
        <dt class="flaglist"><a name="gacinstall" id="gacinstall">gacinstall</a></dt>
        <dd>
          <p>Установить файл в глобальный кэш .NET сборок. При использовании с <tt>sharedfile</tt>, файл будет удален только когда счетчик ссылок достигает нуля.</p>
          <p>Чтобы удалить файл деинсталлятор использует строгое имя сборки, указанная параметром <tt>StrongAssemblyName</tt>.</p>
          <p>Будет исключение, если предпринять попытку использования этой константы в системе, где не установлена .NET Framework.</p>
        </dd>
        <dt class="flaglist"><a name="ignoreversion" id="ignoreversion">ignoreversion</a></dt>
        <dd>
          <p>Не сверять версии; заменять существующие файлы не обращая внимание на номер версии.</p>
          <p>Этот флаг применим к файлам вашего приложения, но <i>не</i> к общим системным файлам.</p>
        </dd>
        <dt class="flaglist"><a name="isreadme" id="isreadme">isreadme</a></dt>
        <dd>
          <p>Файл является файлом ReadMe. Только <i>один</i> файл может иметь этот флаг. Если файл имеет этот флаг, у пользователя будет спрошено, хочет ли он прочитать файл ReadMe после завершения установки. Если он выберет Да, инсталлятор откроет файл с помощью заданной по умолчанию программы для его типа. Поэтому файл ReadMe должен иметь расширение .txt, .wri, или .doc.</p>
          <p>Обратите внимание, что если после установки произойдет перезагрузка компьютера (установка файла с флагом <tt>restartreplace</tt> или <tt>AlwaysRestart</tt>=<tt>yes</tt>), то пользователь не сможет прочитать файл ReadMe сразу после установки программы.</p>
        </dd>
        <dt class="flaglist"><a name="nocompression" id="nocompression">nocompression</a></dt>
        <dd>
          <p>Не дает компилятору сжимать файлы. Используйте этот флаг для файлов, сжатие которых не принесет пользы (например, изображения в формате JPEG), для того, чтобы ускорить процесс компиляции и сохранить несколько байт в полученном инсталляторе.</p>
        </dd>
        <dt class="flaglist"><a name="noencryption" id="noencryption">noencryption</a></dt>
        <dd>
          <p>Не дает компилятору шифровать файл. Используйте этот флаг, если включено шифрование (секция [Setup], директива <tt>Encryption</tt>), но надо извлечь файлы, используемые в секции [Code] с помощью <a href="isxfunc/topic_isxfunc_extracttemporaryfile.htm">ExtractTemporaryFile</a>, до того, как пользователь введет правильный пароль.</p>
        </dd>
        <dt class="flaglist"><a name="noregerror" id="noregerror">noregerror</a></dt>
        <dd>
          <p>В комбинации с любым из флагов <tt>regserver</tt> или <tt>regtypelib</tt> инсталлятор не выдаст сообщение о том, что регистрация не состоялась.</p>
        </dd>
        <dt class="flaglist"><a name="onlyifdestfileexists" id="onlyifdestfileexists">onlyifdestfileexists</a></dt>
        <dd>
          <p>Файл устанавливается только тогда, когда файл с тем же именем уже установлен в системе пользователя. Этот флаг может быть полезен, если инсталлятор является патчем для установленного приложения, и вы хотите, чтобы установились те файлы, которые у пользователя уже есть.</p>
        </dd>
        <dt class="flaglist"><a name="onlyifdoesntexist" id="onlyifdoesntexist">onlyifdoesntexist</a></dt>
        <dd>
          <p>Устанавливает файл только в случае, если такого файла в системе пользователя нет.</p>
        </dd>
        <dt class="flaglist"><a name="overwritereadonly" id="overwritereadonly">overwritereadonly</a></dt>
        <dd>
          <p>Всегда перезаписывает файл с отметкой &quot;только для чтения&quot;. Без этого флага инсталлятор спросит пользователя, перезаписать ли уже установленный файл с отметкой &quot;только для чтения&quot;.</p>
        </dd>
        <dt class="flaglist"><a name="promptifolder" id="promptifolder">promptifolder</a></dt>
        <dd>
          <p>По умолчанию, когда устанавливаемый файл имеет более поздний номер версии (или временную метку, если используется флаг <tt>comparetimestamp</tt>), чем уже существующий файл, инсталлятор не заменит существующий файл. При использовании этого флага инсталлятор спросит пользователя, какой из файлов следует заменить, с ответом по умолчанию оставить существующий файл.</p>
        </dd>
        <dt class="flaglist"><a name="recursesubdirs" id="recursesubdirs">recursesubdirs</a></dt>
        <dd>
          <p>Указывает компилятору или инсталлятору также искать файлы с указанным именем/маской в подпапках папки.</p>
        </dd>
        <dt class="flaglist"><a name="regserver" id="regserver">regserver</a></dt>
        <dd>
          <p>Зарегистрировать DLL/OCX файл. Если этот флаг установлен, инсталлятор вызовет функцию DllRegisterServer из DLL/OCX файла. Деинсталлятор вызовет DllUnregisterServer до удаления файла. При использовании в комбинации с флагом <tt>sharedfile</tt>, регистрация DLL/OCX файла будет только отменена, когда счетчик ссылок достигает нуля.</p>
          <p>В <a href="topic_32vs64bitinstalls.htm">64-битном режиме</a> установки, файл считается 64-битным образом и будет зарегистрирован в 64-битном процессе. Вы можете изменить это, указав флаг <tt>32bit</tt>.</p>
          <p>Для получения дополнительных сведений см. <i>замечания</i> в конце страницы.</p>
        </dd>
        <dt class="flaglist"><a name="regtypelib" id="regtypelib">regtypelib</a></dt>
        <dd>
          <p>Регистрация библиотеки типов (.tlb). Деинсталлятор отменит регистрацию библиотеки типов (если только не указан флаг <tt>uninsneveruninstall</tt>). Как и флаг <tt>regserver</tt>, в комбинации с флагом <tt>sharedfile</tt>, регистрация файла будет только отменена, когда счетчик ссылок достигает нуля.</p>
          <p>При запуске в x64 версии Windows в <a href="topic_32vs64bitinstalls.htm">64-битном режиме</a> установки библиотеки типов будет зарегистрирована в 64-битном процессе. Вы можете изменить это, указав флаг <tt>32bit</tt>.</p>
          <p>Регистрация библиотеки типов в 64-битном режиме в Itanium версий Windows не поддерживается.</p>
          <p>Для получения дополнительных сведений см. <i>замечания</i> в конце страницы.</p>
        </dd>
        <dt class="flaglist"><a name="replacesameversion" id="replacesameversion">replacesameversion</a></dt>
        <dd>
          <p>Когда используется этот флаг и файл уже существует на компьютере пользователя и имеет ту же версию, что и устанавливаемый файл, инсталлятор сравнит файлы и заменит существующий файл, если их содержание различается.</p>
          <p>Если этот флаг не используется, существующий файл с тем же номером версии не заменяется.</p>
        </dd>
        <dt class="flaglist"><a name="restartreplace" id="restartreplace">restartreplace</a></dt>
        <dd>Когда существующий файл нужно замененить, но он используется (заблокирован) другим процессом, по умолчанию будет отображаться сообщение об ошибке. Этот флаг сообщает инсталлятору зарегистрировать файл, чтобы заменить его в следующий раз при перезагрузке системы (с помощью вызова MoveFileEx или создания записи в WININIT.INI). Когда это произойдет, пользователю будет предложено перезагрузить компьютер в конце установки.</dd>
        <dd>
          <p><b>ПРИМЕЧАНИЕ:</b> Флаг будет игнорирован, если у пользователя нет прав администратора. Поэтому при использовании данного флага настоятельно рекомендуется установить <a href="topic_setup_privilegesrequired.htm">PrivilegesRequired</a>=<tt>admin</tt> в секции [Setup].</p>
        </dd>
        <dt class="flaglist"><a name="setntfscompression" id="setntfscompression">setntfscompression</a></dt>
        <dd>Указывает инсталлятору включить NTFS сжатие файла (даже если он не заменит файл). Если не удается установить состояние сжатия по какой-либо причине (например, если сжатие не поддерживается файловой системой), отобразится сообщение об ошибке.</dd>
        <dt class="flaglist"><a name="sharedfile" id="sharedfile">sharedfile</a></dt>
        <dd>
          <p>Указывает, что файл является общим для нескольких приложений, и должен быть удален только если при удалении другие приложения не используют его. Большинство файлов, установленных в системную папку Windows должны использовать этот флаг, в том числе .OCX, .BPL, и .DPL файлы.</p>
          <p>Стандартный механизм подсчета ссылок общих файлов (находятся в реестре в разделе HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\SharedDLLs) используется, чтобы отслеживать число приложений, зависящих от файла. Каждый раз при установке файла счетчик ссылок увеличивается. (Это происходит независимо от того, фактически заменяет ли инсталлятор файл на диске.)  Когда приложение, использующее файл, удаляется, счетчик уменьшается. Если счетчик достигнет нулевого значения, файл удаляется (с разрешения пользователя, если также указан флаг <tt>uninsnosharedfileprompt</tt>).</p>
          <p>Если инстаооятор выполняется более одного раза, количество ссылок на файл будет увеличен более чем один раз. Деинсталлятор будет уменьшать количество ссылок столко же раз, поэтому утечка ссылки не произойдет (при условии, что <a href="topic_setup_uninstalllogmode.htm">UninstallLogMode</a>=<tt>append</tt>).</p>
          <p>Когда этот флаг используется, не указывайте <tt>{syswow64}</tt> в параметре <tt>DestDir</tt>; лучше используйте <tt>{sys}</tt>. Даже если <tt>{sys}</tt> и <tt>{syswow64}</tt> указывают на ту же папку в <a href="topic_32vs64bitinstalls.htm">32-битнов режиме</a> установки, путь должен точно соответствовать тому, который использует любой другой инсталлятор, в противном случае, будет создан второй счетчик ссылок на файл, что может привести в преждевременному удалению файла.Если вам нужно установить общий файл в 32-битной системной папке в <a href="topic_32vs64bitinstalls.htm">64-битном режиме</a> установки, укажите <tt>{sys}</tt> в параметре <tt>DestDir</tt> и дополнительно добавьте флаг <tt>32bit</tt>.</p>
        </dd>
        <dt class="flaglist"><a name="skipifsourcedoesntexist" id="skipifsourcedoesntexist">skipifsourcedoesntexist</a></dt>
        <dd>
          <p>Этот флаг указывает компилятору или инсталлятору, если при этом используется флаг <tt>external</tt>, без сообщений пропустить запись, если файл не существует, а не выдавать сообщение об ошибке.</p>
        </dd>
        <dt class="flaglist"><a name="solidbreak" id="solidbreak">solidbreak</a></dt>
        <dd>
          <p>Когда <a href="topic_setup_solidcompression.htm">уплотненное сжатие</a> включено этот флаг указывает компилятору на необходимость завершить текущий поток сжатия и начать новую, прежде чем сжать файл(ы). Это позволяет инсталлятору перейти к файлу мгновенно без необходимости распаковывать любые предыдущие файлы. Может быть полезно в больших, многокомпонентных инсталляторах, если вы не хотите потратить много времени на распаковку файлов, относящихся к компонентам, которые не были выбраны.</p>
        </dd>
        <dt class="flaglist"><a name="sortfilesbyextension" id="sortfilesbyextension">sortfilesbyextension</a></dt>
        <dd>
          <p>Этот флаг указывает компилятору сжимать найденные файлы, отсортированные по расширению до того, как они будут отсортированы по пути. Это уменьшит размер инсталлятора, если используется директива <a href="topic_setup_solidcompression.htm">SolidCompression</a>.</p>
        </dd>
        <dt class="flaglist"><a name="sortfilesbyname" id="sortfilesbyname">sortfilesbyname</a></dt>
        <dd>
          <p>Этот флаг указывает компилятору сжимать найденные файлы, отсортированные по имени до того, как они будут отсортированы по пути. Это уменьшит размер инсталлятора, если используется директива <a href="topic_setup_solidcompression.htm">SolidCompression</a>. При использовании <tt>sortfilesbyextension</tt> файлы сначала сортируются по расширении.</p>
        </dd>
        <dt class="flaglist"><a name="touch" id="touch">touch</a></dt>
        <dd>
          <p>Этот флаг указывает инсталлятору ставить ту отметку даты/времени устанавливаемых файлов, которая прописана в директивах <a href="topic_setup_touchdate.htm">TouchDate</a> и <a href="topic_setup_touchtime.htm">TouchTime</a> секции [Setup].</p>
          <p>Этот флаг не действует в комбинации с флагом <tt>external</tt>.</p>
        </dd>
        <dt class="flaglist"><a name="uninsnosharedfileprompt" id="uninsnosharedfileprompt">uninsnosharedfileprompt</a></dt>
        <dd>
          <p>При удалении программы общий (shared) файл удаляется автоматически, если связывающий счетчик достиг нуля. При этом вопроса об удалении файла пользователю не задается. Для работы должен быть комбинирован с флагом <tt>sharedfile</tt>.</p>
        </dd>
        <dt class="flaglist"><a name="uninsremovereadonly" id="uninsremovereadonly">uninsremovereadonly</a></dt>
        <dd>
          <p>При удалении файла убираются все атрибуты &quot;только для чтения&quot; перед попыткой удаления.</p>
        </dd>
        <dt class="flaglist"><a name="uninsrestartdelete" id="uninsrestartdelete">uninsrestartdelete</a></dt>
        <dd>
          <p>Когда при удалении файл используется, деинсталлятор поставит файл в очередь на удаление после перезагрузки и в конце деинсталляции предложит пользователю перезагрузить компьютер. Этот флаг может быть полезен, если потребуется удалить, например, программные оболочки, которые не могут быть остановлены программными средствами. Обратите внимание, что для действия этого флага необходимы права администратора.</p>
        </dd>
        <dt class="flaglist"><a name="uninsneveruninstall" id="uninsneveruninstall">uninsneveruninstall</a></dt>
        <dd>
          <p>Никогда не удалять данный файл. Его можно использовать при установке файла, предназначенного для общего использования, как, например, DLLы MFC, которые не должны быть удалены ни при каких обстоятельствах. Обратите внимание, что при сочетании с флагом <tt>sharedfile</tt>, файл не будет удален при деинсталляции, но счетчик ссылок будет по-прежнему уменьшается.</p>
        </dd>
        <dt class="flaglist"><a name="unsetntfscompression" id="unsetntfscompression">unsetntfscompression</a></dt>
        <dd>
          <p>Указывает инсталлятору отключить NTFS сжатие файла (даже если он не заменит файл). Если не удается установить состояние сжатия по какой-либо причине (например, если сжатие не поддерживается файловой системой), отобразится сообщение об ошибке.</p>
        </dd>
      </dl>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">
Flags: isreadme
</pre>
      </div>
    </dd>
  </dl>
  <p><b><a href="topic_componentstasksparams.htm">Параметры секций [Components] и [Tasks]</a></b></p>
  <p><b><a href="topic_commonparams.htm">Общие параметры</a></b></p>
  <h2 class="heading">Замечания:</h2>
  <p>Если файл уже существует в системе пользователя, он по умолчанию будет заменен в соответствии со следующими правилами:</p>
  <ol>
    <li>Если существующий файл имеет более старую версию, чем устанавливаемый файл, существующий файл будет заменен.</li>
    <li>Если существующий файл имеет ту же версию, что и устанавливаемый, он не будет заменен, если только не используется флаг <tt>replacesameversion</tt> и содержание файлов разное.</li>
    <li>Если существующий файл имеет более новую версию, чем устанавливаемый, или если существующий файл имеет информацию о версии, а устанавливаемый файл не имеет, существующий файл не будет заменен.</li>
    <li>Если существующий файл не имеет информации о версии, он будет заменен.</li>
  </ol>
  <p>Определенные флаги, такие как <tt>onlyifdoesntexist</tt>, <tt>ignoreversion</tt> и <tt>promptifolder</tt> , вносят изменения по вышеупомянутым правилам.</p>
  <p>Если инсталлятор неспособен заменить существующий файл, по причине использования файла другим процессом, то инсталлятор предпримет до 4 дополнительных попыток замены файла, с задержкой на секунду перед каждой попыткой. Если все попытки не дадут результата, на экран будет выведено сообщение об ошибке.</p>
  <p>Инсталлятор регистрирует все файлы с флагами <tt>regserver</tt> или <tt>regtypelib</tt> на последнем этапе установки. Однако, если директива <tt>AlwaysRestart</tt> секции <tt>[Setup]</tt> имеет значение <tt>yes</tt> или есть файлы с флагом <tt>restartreplace</tt>, все файлы регистрируются после перезагрузки (путем создания в реестре ключа <i>RunOnce</i>).</p>
  <p>Когда файлы с расширением .HLP (файлы помощи Windows) удаляются, вместе с ними автоматически удаляются сопутствующие файлы с расширением .GID и .FTS. Аналогичным образом, когда файлы .CHM (HTML Help) удаляются, любые .CHW (сгенерированный индекс) файлы тоже автоматически удаляются.</p>
</div>
</body>
</html>
