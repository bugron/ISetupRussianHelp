<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<title>Секция [Dirs]</title>
<!--[if IE 6]><style type="text/css">html{overflow-y:scroll}</style><![endif]-->
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" src="topic.js"></script>
</head>
<body>
<h1 class="topicheading">Секция [Dirs]</h1>
<div class="topicbody">
  <p>Это не обязательная секция. Она задает дополнительные папки, которые инсталлятор создаст автоматически <i>помимо</i> папки приложения, которую выберет пользователь. Создание подпапок для папки приложения является общим случаем использования этой секции.</p>
  <p>Обратите внимание, что нельзя создать папку до установки в нее файлов с помощью секции [Files], так что эта секция пригодна главным образом для создания пустых папок.</p>
  <p>Пример секции <tt>[Dirs]</tt>:</p>
  <pre class="indent examplebox">[Dirs]<br />Name: &quot;{app}\data&quot;<br />Name: &quot;{app}\bin&quot;</pre>
  <p>В приведенном примере после того, как инсталлятор создаст папку приложения, для нее создастся две подпапки: data и bin.</p>
  <p>Список поддерживаемых <a href="topic_params.htm">параметров</a>:</p>
  <dl>
    <dt class="paramlist"><b><a name="Name" id="Name">Name</a></b>&nbsp;<i>(Обязательно)</i></dt>
    <dd class="paramlist">
      <p>Имя создаваемой папки, которое обычно начинается с константы.</p>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">Name: &quot;{app}\MyDir&quot;</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="Attribs" id="Attribs">Attribs</a></b></dt>
    <dd class="paramlist">
      <p>Задает дополнительные атрибуты для папки: один или более из <tt>readonly</tt>, <tt>hidden</tt>, <tt>system</tt>, <tt>notcontentindexed</tt>. Если этот параметр не указан, инсталлятор не назначит ни одного специального параметра для папки.</p>
      <p>Если папка уже существует, указанные атрибуты будут комбинированы с уже существующими атрибутами папки.</p>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">Attribs: hidden system</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="Permissions" id="Permissions">Permissions</a></b></dt>
    <dd class="paramlist">
      <p>Задает дополнительные разрешения в ACL (access control list - список доступа) папки. Не рекомендуется использовать этот параметр, если вы не хорошо разбираетесь в ACL или в том, для чего следует его менять, потому что неправильное изменение может негативно сказаться на безопасности системы.</p>
      <p>Для эффективной работы параметра папка должна быть расположена в файловой системе, поддерживающей ACL (например NTFS), и пользователь должен иметь права на изменение разрешений папки. В случае если эти правила не соблюдены, сообщений об ошибке выдаваться не будут, и разрешения не вступят в силу.</p>
      <p>Этот параметр должен быть использован <i>только</i> для папок приложения. Никогда не меняйте ACL директорий типа <tt>{sys}</tt> или <tt>{pf}</tt>, иначе можно повредить систему безопасности.</p>
      <p>К тому же рекомендуется избегать использования этого параметра для разрешения записи в папках, содержащих программные файлы. Например, разрешение модифицировать директорию <tt>{app}</tt> даст возможность любому пользователю вмешиваться в программные файлы вашего приложения; это увеличивает потенциальную уязвимость. (Впрочем, для приложения будет вполне безопасно, если вы добавите разрешения для подпапки приложения, которая не содержит программных файлов - например, <tt>{app}\data</tt>.)</p>
      <p>Указанные разрешения устанавливаются не зависимо от того, существовала ли папка до инсталляции.</p>
      <p>Параметр может включать один или более значений, разделенных пробелами:</p>
      <div class="indent">
        <p><tt><a href="topic_usergroupids.htm">&lt;идентификатор пользователя или группы&gt;</a>-&lt;тип доступа&gt;</tt></p>
      </div>
      <p>В секции [Dirs] поддерживаются следующие типы доступа:</p>
      <dl>
        <dt class="flaglist"><a name="full" id="full">full</a></dt>
        <dd>
          <p>Разрешение &quot;полного доступа&quot;, похожее на <tt>modify</tt> (см. ниже), но кроме того позволяет указанному пользователю/группе пользователей присвоить папку и менять для нее разрешения. Используйте как можно реже; как правило, <tt>modify</tt> будет достаточно.</p>
        </dd>
        <dt class="flaglist"><a name="modify" id="modify">modify</a></dt>
        <dd>
          <p>Разрешение &quot;на модификацию&quot;, которое позволяет указанному пользователю/группе пользователей чтение, выполнение, создание, модификацию и удаление файлов в папке и ее подпапках.</p>
        </dd>
        <dt class="flaglist"><a name="readexec" id="readexec">readexec</a></dt>
        <dd>
          <p>Разрешение &quot;на чтение и выполнение&quot;, которое позволяет указанному пользователю/группе пользователей чтение и выполнение файлов в папке и ее подпапках.</p>
        </dd>
      </dl>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">Permissions: users-modify</pre>
      </div>
    </dd>
    <dt class="paramlist"><b><a name="Flags" id="Flags">Flags</a></b></dt>
    <dd class="paramlist">
      <p>Параметры для установки дополнительных опций. Разделяются пробелами. Поддерживаемые значения:</p>
      <dl>
        <dt class="flaglist"><a name="deleteafterinstall" id="deleteafterinstall">deleteafterinstall</a></dt>
        <dd>
          <p>Указывает инсталлятору создать обычную папку, но потом удалить ее после завершения (или прерывания) установки, если она будет пустая. Это может быть полезно, когда извлекаемые временные файлы нужны программе для выполнения скрипта в секции [Run].</p>
          <p>Этот флаг не удалит папки, которые уже существовали до начала установки.</p>
        </dd>
        <dt class="flaglist"><a name="setntfscompression" id="setntfscompression">setntfscompression</a></dt>
        <dd>
          <p>Дает инсталлятору команду включить сжатие NTFS папки. Если инсталлятор будет не в состоянии установить состояние сжатия по какой-либо причине (например, если сжатие не будет поддерживаться файловой системой), то сообщение об ошибке не будет выведено на экран.</p>
          <p>Если каталог будет существовать, то состояние сжатия любых файлов, существующих в каталоге, не будет изменено.</p>
        </dd>
        <dt class="flaglist"><a name="uninsalwaysuninstall" id="uninsalwaysuninstall">uninsalwaysuninstall</a></dt>
        <dd>
          <p>Указывает деинсталлятору всегда пытаться удалять папку, если она пустая. Обычно деинсталлятор только попытается удалить папку, если она не существовала до начала установки.</p>
        </dd>
        <dt class="flaglist"><a name="uninsneveruninstall" id="uninsneveruninstall">uninsneveruninstall</a></dt>
        <dd>
          <p>Указывает деинсталлятору не пытаться удалить папку. По умолчанию деинсталлятор удаляет все папки, указанные в секции [Dirs], если они пустые.</p>
        </dd>
        <dt class="flaglist"><a name="unsetntfscompression" id="unsetntfscompression">unsetntfscompression</a></dt>
        <dd>
          <p>Дает инсталлятору команду отключить сжатие NTFS папки. Если инсталлятор будет не в состоянии установить состояние сжатия по какой-либо причине (например, если сжатие не будет поддерживаться файловой системой), то сообщение об ошибке не будет выведено на экран.</p>
          <p>Если каталог будет существовать, то состояние сжатия любых файлов, существующих в каталоге, не будет изменено.</p>
        </dd>
      </dl>
      <div class="examplebox">
        <div class="exampleheader">Например:</div>
        <pre class="nomargin">Flags: uninsneveruninstall</pre>
      </div>
    </dd>
  </dl>
  <p><b><a href="topic_componentstasksparams.htm">Параметры секций [Components] и [Tasks]</a></b></p>
  <p><b><a href="topic_commonparams.htm">Общие параметры</a></b></p>
</div>
</body>
</html>
