<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251" />
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<title>Pascal Scripting: ProcessorArchitecture</title>
<link rel="stylesheet" type="text/css" href="../styles.css" />
<script type="text/javascript" src="../topic.js"></script>
</head>
<body>
<h1 class="topicheading">Pascal Scripting: ProcessorArchitecture</h1>
<div class="topicbody">
  <div><b>Прототип:</b></div>
  <p><tt>function ProcessorArchitecture: TSetupProcessorArchitecture;</tt></p>
  <div><b>Описание:</b></div>
  <p>Возвращает тип архитектуры процессора (ЦП).</p>
  <p>TSetupProcessorArchitecture определяется как:</p>
  <p><tt>TSetupProcessorArchitecture = (paUnknown, paX86, paX64, paIA64);</tt></p>
  <div><b>Комментарии:</b></div>
  <p>64-битная&nbsp;архитектура ЦП никогда не будет возваращена на 32-битных версиях Windows. Следовательно, вы не можете использовать эту функцию для обнаружения 64-битного ЦП AMD на 32-битных версиях Windows; вы просто, как результат, получите значение <tt>paX86</tt>.</p>
  <p>Если инсталлятор/деинсталлятор не может определить тип ЦП, то функция возвращает значение<tt> paUnknown</tt>. Можно предположить, что &quot;неизвестные&quot; типы процессоров, по крайней мере способны выполнить 32-битный код.</p>
  <p>Если функция возвращает значение <tt>paIA64</tt> и <tt>ia64</tt> <i>не</i> содержится в значении директивы <a href="../topic_setup_architecturesinstallin64bitmode.htm">ArchitecturesInstallIn64BitMode</a> секции [Setup], Вы не должны считать, что 64-разрадные возможности Inno Setup доступны, например, константа <tt>{pf64}</tt>. Эти возможности работают только тогда, когда функция <a href="topic_isxfunc_iswin64.htm">IsWin64</a> возвращает True и как документировано, она не может вернуть значение True на старых версиях Windows Itanium, из-за того, что некоторые требуемые для Inno Setup API недоступны.</p>
  <p>Следовательно, вместо:</p>
  <pre>  if ProcessorArchitecture = paIA64 then<br />    // выполнить некоторые специфичные для Itanium<br />    // задачи установки, которые включают в себя {pf64}<br />
</pre>
  <p>нужно дополнительно проверить, что IsWin64 возвращает True:</p>
  <pre>  if ProcessorArchitecture = paIA64 then<br />  begin<br />    if IsWin64 then<br />      // выполнить некоторые специфичные для Itanium<br />      // задачи установки, которые включают в себя {pf64}<br />    else<br />      // нельзя использовать 64-разрадные возможности; показать сообщение об ошибке,<br />      // тихо завершить работу, попробовать что-то другое, и т. д.<br />  end;<br />
</pre>
  <p>Если <tt>ia64</tt> <i>содержится</i> в значении директивы <a href="../topic_setup_architecturesinstallin64bitmode.htm">ArchitecturesInstallIn64BitMode</a> секции [Setup], то не обязательно проверить возвращаемое значение функции IsWin64, потому что инсталлятор сам это сделает при запуске и если это значение False, завершит работу с сообщением об ошибке (<tt>MissingWOW64APIs</tt>).</p>
  <div><b>Например:</b></div>
  <pre>var<br />  S: String;<br />begin<br />  case ProcessorArchitecture of<br />    paX86: S := 'x86';<br />    paX64: S := 'x64';<br />    paIA64: S := 'Itanium';<br />  else<br />    S := 'Unrecognized';<br />  end;<br />  MsgBox('Your processor architecture: ' + S, mbInformation, MB_OK);<br />end;</pre>
  <div><b>См. также:</b></div>
  <p><a href="topic_isxfunc_iswin64.htm">IsWin64</a> <br />
    <a href="topic_isxfunc_is64bitinstallmode.htm">Is64BitInstallMode</a></p>
</div>
</body>
</html>